# `scrcpy`(스크린카피)

- Galaxy에서 One UI 7부터 Dex for PC 지원 종료
- scrcpy를 대체재로 사용
- 윈도 기능인 Links to Windows가 있긴한데, 아직 부실하고 윈도우 계정 로그인을 요구함
- https://github.com/Genymobile/scrcpy 의 releases에서 다운로드
- OS별 단순 실행파일 1개로 구성되며, 의존성으로 사용하는 adb 실행파일도 포함

## How to Use

- 환경: Android16, OneUI8.0, Windows11, scrcpy3.3.4

### 폰에서 사전설정

- 보안 위험 자동 차단(Auto Blocker) 비활성화
  - default: true
- 개발자 옵션 - USB 디버깅 기능 활성화
  - default: false (보안 위험 자동 차단 기능에 의해 강제됨)
- `보안상 위험한 설정들이므로 반드시 아래 보안 유의 사항을 참조`

### 케이블 연결시 폰에서 설정

- 케이블 연결
- USB 설정
  - `휴대전화 충전만` => `파일전송/Android Auto`로 변경
  - 케이블 연결시 팝업창을 놓쳤다면, 상단바 알림에서 확인가능
- 해당 PC의 USB 디버깅 허용 여부
  -  항상 허용에 체크하지말 것(중요)
     - 항상 허용 체크 시: 폰이 PC의 RSA 공개키를 저장하여, 이후 재연결 시 자동 인증됨
     - 일회성 허용: 해당 세션에만 인증되고, 공개키가 저장되지 않아 다음 연결 시 다시 인증 필요
     - 매 세션마다 명시적 허용을 하면, 비인증 PC의 접근을 원천 차단할 수 있음"
  
### scrcpy 실행

- 케이블 연결된 채로 scrcpy 파일 실행

```sh
# 옵션없이 default 실행(단순 미러링)
scrcpy

# 가상 디스플레이 옵션
# 폰에 외부 디스플레이를 붙인것으로 인식시킴
scrcpy --new-display=1920x1080
```

### 사용 후

- adb 프로세스 종료
- scrcpy 실행시 동일경로의 adb.exe를 실행시켜 활용하는데, 사용 후 꺼주는 것이 안전
- 작업관리자에서 끄던가 `adb kill-server`

## 보안 유의 사항

- scrcpy 자체
  - 프랑스 업체 GenyMobile에서 제공
  - Github 소스코드 공개되어있고, 널리 사용됨
  - 어느정도 공신력이 있으므로 믿어도 될 듯
- adb 주의
  - `정상 연결된 상태에서 사실상 폰의 모든 권한을 PC에서 가짐`을 감안할 것
  - 기존 Dex for PC는 삼성 독자 프로토콜을 쓰므로 adb를 사용하지 않았었음
  - scrcpy종료 후에도 adb 프로세스가 계속 살아있으므로 수동 종료할 것
- 잠금 화면 보호
  - 안드로이드 11 이상 기본 정책에 의해, 폰이 잠겨(Lock) 있으면, 이미 인증된 PC라도 일부 ADB 명령이 거부되므로, 폰 화면만 잠궈도 1차 방어 가능