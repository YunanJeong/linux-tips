# network

## ufw

```sh
# 인바운드 아웃바운드 설정 조회
sudo ufw status
```

## telnet

- Windows 기본 탑재
- Ubuntu에 없을시 sudo apt install -y telnet

```sh
# 원격 연결
# 대상 서버의 특정 앱이 살아있는지 확인할 때 유용
# 특정 포트에 대한 네트워크 인가 확인 가능 (해당 포트로 앱이 켜져있어야 함(리스닝모드))
telnet {IP} {Port}
```

## nc(netcat)

- Ubuntu 기본 탑재

```sh
# 80번 포트로 임시 서버 열기
nc -lk 80

# -l: listen (리스닝모드 설정. 인바운드 통신 대기)
# -p: port. p옵션은 일반적으로 생략가능
# -k: keep-alive. (연결종료돼도 리스닝모드 유지)
```

## python

```sh
# 80번 포트로 임시 서버 열기
python -m http.server 80
```

## telnet과 nc로 네트워크 인가 여부 확인 예

로컬호스트에서 원격 호스트 (192.x.x.x:8080)로의 트래픽이 허용되는지 확인하기위해 다음과 같이하면 된다.

- 원격 호스트에서 `nc -lk 8080`로 임시서버 열기
- 로컬 호스트에서 `telnet 192.x.x.x 8080` 실행 후 확인

### telnet 반응 정리

- 원격 호스트에서 네트워크 인바운드가 허용되고, 해당 포트에 앱이 켜져있으면(포트 리스닝모드),
  - telnet을 실행한 cmd창이 메시지를 전송할 수 있는 prompt로 전환된다.
  - 켜져있는 서버에 따라 cmd창 전환만 되고 렉걸릴 수 있다.
- 네트워크 인바운드가 불허되거나,
  - `연결 대상 x.x.x.x ...` 라는 메시지에서 cmd창이 멈춘다. (Timeout까지 기다림)
  - 인프라 수준(Network Layer, Transport Layer, Network Firewall)에서 네트워크가 차단된 상황이라고 볼 수 있음
- 해당 포트에 앱이 없으면(포트오픈 안된 상황),
  - `호스트에 연결할 수 없습니다.(Connection refused)` 라는 메시지
  - 이 때는 보통 네트워크 인바운드 허용은 되어있다고 보면됨
  - Application Layer 수준의 방화벽에서 차단한 것일 수도 있음

### 윈도우에서 통신테스트시

- 기본 보안 설정들 때문에 통신 테스트가 잘 안될 수 있음
- 어떤 테스트든 `파워쉘 대신 cmd 사용할 것`
- 임시서버 실행시 python 설치 후 상기 예제로 실행 권장
- 파워쉘에서도 임시서버 여는 커맨드 있으나 비추천
